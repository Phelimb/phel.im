var canalytics_obj=canalytics_obj||(function(){var instance=null;function _ins(){var _self=this,site_ids=[],pageviews_fired=[],chrome_pre=0;this.init=function(site_id){site_ids.push(site_id);this.setup_site_id(site_id);};this.setup_site_id=function(site_id){this.domain="http://stats.churchanalytics.com";if(document.location.protocol==="https:"){this.domain="https://stats.churchanalytics.com";this.secure=1;}if(canalytics_custom.async){setTimeout(_self.advanced,1000);}else{this.add_event(window,'load',_self.advanced);}if(!_self.get_cookie('first_pv_'+site_id)){_self.set_cookie('first_pv_'+site_id,1,1200);_self.set_referrer(document.referrer);if(document.webkitVisibilityState=='prerender')_self.pre_monitor();}if(!canalytics_custom.pageview_disable){if(window.olark){olark('api.boot.onIdentityReady',function(s,v,c){_self.olark(s,v,c,1);});setTimeout(_self.pageview,2000);}else{_self.pageview();}}};this.pre_monitor=function(){if(document.webkitVisibilityState=='prerender'){chrome_pre=1;setTimeout(_self.pre_monitor,1000);}else{chrome_pre=0;_self.beacon('chrome_pre','&chrome_pre=2');}};this.base=function(site_id_index,is_ping){var base_url=_self.domain+"/in.php?site_id="+site_ids[site_id_index];if(is_ping)return base_url;base_url+="&res="+screen.width+"x"+screen.height+"&lang="+(navigator.language||navigator.browserLanguage||'en').substr(0,2)+(_self.secure?"&secure=1":"");if(canalytics_custom.session){for(var i in canalytics_custom.session){base_url+="&custom["+_self.enc(i)+"]="+_self.enc(canalytics_custom.session[i]);}}return base_url;};this.set_referrer=function(r){_self.ref=r?(RegExp("^https?://[^/]*"+location.host.replace(/^www\./i,"")+"/","i").test(r)?'':this.enc(r)):'';};this.olark=function(s,v,c,do_pageview){var o=s+','+v+','+c,c=_self.get_cookie('canalytics_olark');if(c&&c==o){if(do_pageview)_self.pageview();return;}else{if(c)_self.set_cookie('canalytics_olark',c,-3600);_self.set_cookie('canalytics_olark',o,600);c=_self.get_cookie('canalytics_olark');}if(do_pageview||pageviews_fired.length==0){_self.pageview('&olark='+o);}else if(c){_self.beacon('ping','&olark='+o);}};this.pageview=function(extra){var href=canalytics_custom.href||'';if(!href){if(canalytics_custom.iframe&&self!=parent){_self.set_referrer(parent.document.referrer);href=parent.location.pathname+parent.location.search;if(!canalytics_custom.title)canalytics_custom.title=parent.document.title;}else if(location.hash.match(/utm_/i)){href=location.pathname+(location.search?location.search+'&':'?')+location.hash.substr(1);}else href=location.pathname+location.search;}if(_self.facebook_is_lame(href))return;_self.beacon('','&href='+_self.enc(href)+'&title='+_self.enc(canalytics_custom.title||document.title)+'&ref='+(_self.ref||'')+(chrome_pre?'&chrome_pre='+chrome_pre:'')+(extra||''),1);for(var p=0;p<site_ids.length;p++){if(!_self.is_pageview_fired(site_ids[p])){pageviews_fired.push(site_ids[p]);}}};this.log=function(href,title,type){if(_self.facebook_is_lame(href))return;if(type=='pageview')href=href.replace(/^https?:\/\/([^\/]+)/i,'');_self.beacon((type||'click'),'&href='+_self.enc(href)+'&title='+_self.enc(title||'')+'&ref='+_self.ref);if(type=="download"||type=="outbound")_self.pause();};this.facebook_is_lame=function(href){return href.match(/fb_xd_fragment|fb_xd_bust|fbc_channel/i);};this.video=function(action,time,url,title){if(!url||!action)return false;_self.beacon('video','&video[action]='+action+'&video[time]='+(time||0)+'&href='+_self.enc(url)+(title?'&title='+_self.enc(title):''));};this.goal=function(id,revenue){if(!id)return;var goal=(typeof id=='number'||id.match(/^[0-9]+$/))?'[id]='+id:'[name]='+_self.enc(id);_self.beacon('goal','&goal'+goal+(revenue?'&goal[revenue]='+revenue:''));};this.beacon=function(type,q,called_by_pageview){q=q||'';type=type||'pageview';var jsuid='',goal='',split='';if(!canalytics_custom.no_cookies&&!canalytics_custom.cookies_disable){jsuid=_self.get_cookie('_jsuid');if(!jsuid){_self.set_cookie('_jsuid',_self.randy());jsuid=_self.get_cookie('_jsuid');}}if(canalytics_custom.goal){if(typeof canalytics_custom.goal=='object'){for(var i in canalytics_custom.goal){goal+='&goal['+_self.enc(i)+']='+_self.enc(canalytics_custom.goal[i]);}}else{goal='&goal='+_self.enc(canalytics_custom.goal);}canalytics_custom.goal='';}if(canalytics_custom.split){for(var i in canalytics_custom.split){if(i=='goal'&&typeof canalytics_custom.split.goal=='object'){for(var j=0,l=canalytics_custom.split.goal.length;j<l;j++){split+='&split[goal][]='+canalytics_custom.split.goal[j];}}else split+='&split['+_self.enc(i)+']='+_self.enc(canalytics_custom.split[i]);}canalytics_custom.split='';}for(var site_id_index=0;site_id_index<site_ids.length;site_id_index++){var site_id=site_ids[site_id_index];if(_self.get_cookie('no_tracky_2_'+site_id))continue;if(type!='pageview'&&type!='chrome_pre'&&_self.get_cookie('unpoco_2_'+site_id))continue;if(called_by_pageview&&type=='pageview'&&_self.is_pageview_fired(site_id))continue;var s=document.createElement('script');s.type='text/javascript';s.async=true;s.src=_self.base(site_id_index,type=='ping')+'&type='+type+q+goal+split+'&jsuid='+jsuid+'&mime=js&x='+Math.random()+(_self.get_cookie('unpoco_2_'+site_id)?'&up':'');(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(s);}_self.ref='';_self.ping_start();};this.is_pageview_fired=function(site_id){for(var p=0;p<pageviews_fired.length;p++)if(pageviews_fired[p]==site_id)return true;return false;};this.ping=function(){_self.beacon('ping');};this.ping_set=function(){var pingy=setInterval(_self.ping,120000);setTimeout("clearInterval("+pingy+")",_self.ps_stop*1000);_self.ping();};this.ping_start=function(){if(canalytics_custom.ping_disable||_self.pinging)return;_self.pinging=1;_self.ps_stop=(canalytics_custom.timeout&&canalytics_custom.timeout>=5&&canalytics_custom.timeout<=240)?((canalytics_custom.timeout-4)*60)+5:365;setTimeout(_self.ping,60000);setTimeout(_self.ping,150000);setTimeout(_self.ping_set,240000);};this.get_cookie=function(name){var ca=document.cookie.split(';');for(var i=0,l=ca.length;i<l;i++){if(eval("ca[i].match(/\\b"+name+"=/)"))return decodeURIComponent(ca[i].split('=')[1]);}return'';};this.set_cookie=function(name,value,expires){var ex=new Date;ex.setTime(ex.getTime()+(expires||20*365*86400)*1000);document.cookie=name+"="+value+";expires="+ex.toGMTString()+";path=/;domain="+(canalytics_custom.cookie_domain||"."+location.hostname.replace(/^www\./i,""))+";";};this.randy=function(){return Math.round(Math.random()*4294967295);};this.pause=function(x){var now=new Date();var stop=now.getTime()+(x||canalytics_custom.timer||500);while(now.getTime()<stop)var now=new Date();};this.isset=function(e){return(typeof(window[e])!="undefined");};this.enc=function(e){return window.encodeURIComponent?encodeURIComponent(e):escape(e);};this.add_event=function(e,type,func){if(e.addEventListener){e.addEventListener(type,func,false);}else if(e.attachEvent){e.attachEvent("on"+type,func);}};this.download=function(e){_self.img_src(e,"download");};this.outbound=function(e){_self.img_src(e,"outbound");};this.click=function(e){_self.img_src(e,"click");};this.img_src=function(e,type){obj=_self.get_target(e);_self.log(_self.get_href(obj),_self.get_text(obj),type);};this.get_text=function(e){do{var txt=e.text?e.text:e.innerText;if(txt)return txt;if(e.alt)return e.alt;if(e.title)return e.title;if(e.src)return e.src;e=_self.get_parent(e);}while(e);return"";};this.get_href=function(e){do{if(e.href&&!e.src)return e.href;e=_self.get_parent(e);}while(e);return"";};this.get_parent=function(e){return e.parentElement||e.parentNode;};this.get_target=function(e){if(!e)var e=window.event;var t=e.target?e.target:e.srcElement;if(t.nodeType&&t.nodeType==3)t=t.parentNode;return t;};this.advanced=function(){if(canalytics_custom.advanced_disable)return;var is_link=new RegExp("^(https?|ftp|telnet|mailto):","i");var is_link_internal=new RegExp("^https?:\/\/(.*)"+location.host.replace(/^www\./i,""),"i");var is_download=new RegExp("\\.(7z|aac|avi|cab|csv|dmg|doc(x|m|b)?|exe|flv|gif|gz|jpe?g|js|m4a|mp(3|4|e?g)|mov|msi|ods|pdf|phps|png|ppt(x|m|b)?|rar|rtf|sea|sit|tar|torrent|txt|wma|wmv|xls(x|m|b)?|xml|zip)$","i");var a=document.getElementsByTagName("a");for(var i=0;i<a.length;i++){if(a[i].className.match(/canalytics_log/i)){if(a[i].className.match(/canalytics_log_download/i)){_self.add_event(a[i],"mousedown",_self.download);}else if(a[i].className.match(/canalytics_log_outbound/i)){_self.add_event(a[i],"mousedown",_self.outbound);}else{_self.add_event(a[i],"mousedown",_self.click);}}else{if(is_link.test(a[i].href)&&!a[i].className.match(/canalytics_ignore/i)){if(is_download.test(a[i].href)){_self.add_event(a[i],"mousedown",_self.download);}else if(!is_link_internal.test(a[i].href)){_self.add_event(a[i],"mousedown",_self.outbound);}else if(canalytics_custom.outbound_pattern){var p=canalytics_custom.outbound_pattern;if(typeof p=='object'){for(var j=0;j<p.length;j++){if(_self.outbound_pattern_match(a[i].href,p[j])){_self.add_event(a[i],"mousedown",_self.outbound);break;}}}else if(typeof p=='string'){if(_self.outbound_pattern_match(a[i].href,p))_self.add_event(a[i],"mousedown",_self.outbound);}}}}}};this.outbound_pattern_match=function(href,pattern){return RegExp(pattern.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")).test(href);};}return new function(){this.getInstance=function(){if(instance==null){instance=new _ins();instance.constructor=null;}return instance;}}})();var canalytics=canalytics_obj.getInstance();if(!canalytics.isset("canalytics_custom"))canalytics_custom={};if(canalytics.isset("canalytics_page_title"))canalytics_custom.title=canalytics_page_title;if(canalytics.isset("canalytics_advanced_disable"))canalytics_custom.advanced_disable=1;if(canalytics.isset("canalytics_pause_timer"))canalytics_custom.timer=canalytics_pause_timer;if(canalytics.isset("canalytics_custom_session"))canalytics_custom.session=canalytics_custom_session;if(canalytics.isset("canalytics_goal"))canalytics_custom.goal=canalytics_goal;if(canalytics.isset("async_site_id"))var canalytics_site_id=async_site_id;if(canalytics.isset("canalytics_site_id")){var canalytics_site_ids=canalytics_site_ids||[];canalytics_site_ids.push(canalytics_site_id);}if(canalytics.isset("canalytics_site_ids")){canalytics_custom.async=1;while(canalytics_site_ids.length)canalytics.init(canalytics_site_ids.shift());}function statsgoyes(site_id){canalytics.init(site_id);}var videogoyes=canalytics.video;